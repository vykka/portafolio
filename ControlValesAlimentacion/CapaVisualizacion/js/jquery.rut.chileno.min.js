!function(r){function t(r,t){r.closest(".rut-container").append(t)}r.fn.rut=function(n){var e=r.extend({error_html:'<span class="rut-error">Rut incorrecto</span>',formatear:!0,on:"blur",required:!0,placeholder:!0,fn_error:function(r){t(r,e.error_html)},fn_validado:function(){}},n);return this.each(function(){var t=r(this);t.wrap('<div class="rut-container"></div>'),t.attr("pattern","[0-9]{7,8}-[0-9k]{1}"),e.required&&t.attr("required","required"),e.placeholder&&t.attr("placeholder","12345678-5"),e.formatear&&t.on("blur",function(){t.val(r.rut.formatear(t.val()))}),t.on(e.on,function(){r(".rut-error").remove(),r.rut.validar(t.val())&&""!=r.trim(t.val())?e.fn_validado(t):e.fn_error(t)})})}}(jQuery),jQuery.rut={validar:function(r){if(!/^[0-9]+-[0-9kK]{1}$/.test(r))return!1;var t=r.split("-"),n=t[1],r=t[0];return"K"==n&&(n="k"),$.rut.dv(r)==n},dv:function(r){for(var t=0,n=1;r;r=Math.floor(r/10))n=(n+r%10*(9-t++%6))%11;return n?n-1:"k"},formatear:function(r){return r.replace(/^(\d{7,8})(\w{1})$/,"$1-$2")},quitar_formato:function(r){return r=r.split("-").join("").split(".").join("")}};
